<div id="result">
<% if @local_orders.blank? %>  
    <em class="note">There are no orders in your store.</em>
  <% else %>
  
  <!-------------------------------------------------------------------------------------->
 <table border ="1px solid">
  <!--------HEADER PART OF THE TABLE ---->
  <tr>
    <th>Vendor Name</th>
    	 <% @months.each do |m| %>
     <td><%= m %> </td>
    	  <% end %>
   </tr>
    <!--------HEADER PART OF THE TABLE ---->
    <!--------DATA PART OF THE TABLE ---->    
   <% @m = [1,2,3,4,5,6,7,8,9,10,11,12]%> 
  
   <% @local_vendors.each do |v| %>
   
   <tr>
    <th> <%= v.vendor %></th>
     <% @years = {} %>
      <% @local_orders.each do |l| %>
      <% if l.vendor_name == v.vendor %>
      <% @m.each do |m| %>
      <% if l.month_list == m.to_s %>
    
     
  <% @years[v.vendor] ||= {}%>
  <% @years[v.vendor][m] ||= [] %>
  <% @years[v.vendor][m] << number_to_currency(l.totcost, :unit => "£") %>
     
     <% end %>
   
 
   <% end %>
   
      <% end %>
      <% end %>
   
  
     <% if !@years.blank? %>   
     <% @years.each do |y| %>
    
     
     	<% if y[0] == v.vendor %>
				   
     				<% if !y[1][1].blank? %><td><%= change_to_value(y[1][1].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][2].blank? %><td><%=change_to_value(y[1][2].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][3].blank? %><td><%=change_to_value(y[1][3].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][4].blank? %><td><%=change_to_value(y[1][4].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][5].blank? %><td><%=change_to_value(y[1][5].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][6].blank? %><td><%=change_to_value(y[1][6].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][7].blank? %><td><%=change_to_value(y[1][7].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][8].blank? %><td><%=change_to_value(y[1][8].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][9].blank? %><td><%=change_to_value(y[1][9].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][10].blank? %><td><%=change_to_value(y[1][10].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][11].blank? %><td><%=change_to_value(y[1][11].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     				<% if !y[1][12].blank? %><td><%=change_to_value(y[1][12].to_s) %></td><%else %><td><%= number_to_currency(0,:unit => "£") %></td><% end %>
     		
     	
     	<% end %>
     	
    <% end %>
    
    <% else %>
    
        	<td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td><td><%= number_to_currency(0,:unit => "£") %></td>
   <% end %>
  
  </tr> 
    
 <% end %>



    
  </table>
  <% end %>
